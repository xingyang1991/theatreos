# TheatreOS 快速测试配置指南

## 访问地址

- **前端应用**: http://120.55.162.182
- **API文档**: http://120.55.162.182/docs
- **测试模式API**: http://120.55.162.182/v1/test-mode/config

## 测试模式参数

### 查看当前配置
```bash
curl -s http://120.55.162.182/v1/test-mode/config | python3 -m json.tool
```

### 修改配置
```bash
curl -X PUT http://120.55.162.182/v1/test-mode/config \
  -H "Content-Type: application/json" \
  -d '{
    "scene_switch_interval": 30,
    "event_trigger_interval": 15,
    "vote_duration": 60
  }'
```

## 可调整参数说明

### 时间参数（快速测试用）

| 参数 | 默认值 | 说明 | 建议测试值 |
|------|--------|------|-----------|
| `scene_switch_interval` | 30秒 | 场景自动切换间隔 | 15-60秒 |
| `event_trigger_interval` | 15秒 | 随机事件触发间隔 | 10-30秒 |
| `vote_duration` | 60秒 | 投票/下注持续时间 | 30-120秒 |
| `gate_cooldown` | 30秒 | 门冷却时间 | 15-60秒 |

### 游戏参数

| 参数 | 默认值 | 说明 | 建议测试值 |
|------|--------|------|-----------|
| `ring_upgrade_points` | 100 | Ring升级所需积分 | 50-200 |
| `base_choice_points` | 50 | 基础选择获得积分 | 25-100 |
| `evidence_drop_rate` | 0.8 | 证物掉落率(0-1) | 0.5-1.0 |
| `world_var_change_multiplier` | 5.0 | 世界变量变化倍率 | 2.0-10.0 |

### 舞台参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| `max_active_stages` | 15 | 最大激活舞台数 |
| `ring_c_radius` | 2000米 | Ring C 范围 |
| `ring_b_radius` | 1000米 | Ring B 范围 |
| `ring_a_radius` | 500米 | Ring A 范围 |

## 快速测试场景

### 场景1：快速投票测试
```bash
# 设置30秒投票周期
curl -X PUT http://120.55.162.182/v1/test-mode/config \
  -d '{"vote_duration": 30, "event_trigger_interval": 10}'
```

### 场景2：高频事件测试
```bash
# 设置10秒事件触发
curl -X PUT http://120.55.162.182/v1/test-mode/config \
  -d '{"event_trigger_interval": 10, "scene_switch_interval": 20}'
```

### 场景3：快速升级测试
```bash
# 降低升级门槛
curl -X PUT http://120.55.162.182/v1/test-mode/config \
  -d '{"ring_upgrade_points": 50, "base_choice_points": 100}'
```

## 重置测试数据

### 重置所有数据
```bash
curl -X POST http://120.55.162.182/v1/test-mode/reset
```

### 重置特定剧场
```bash
curl -X POST http://120.55.162.182/v1/test-mode/reset?theatre_id=YOUR_THEATRE_ID
```

## 15个上海舞台

| 区域 | 舞台名称 | 哈利波特映射 | 坐标 |
|------|----------|-------------|------|
| 新天地 | 新天地·对角巷 | 对角巷 | 31.2195, 121.4737 |
| 淮海路 | 淮海路·丽痕书店 | 丽痕书店 | 31.2208, 121.4689 |
| 复兴公园 | 复兴公园·魔药花园 | 魔药花园 | 31.2175, 121.4712 |
| 外滩 | 外滩·魔法部东方办事处 | 魔法部 | 31.2400, 121.4900 |
| 南京路 | 南京路·韦斯莱魔法把戏坊 | 韦斯莱把戏坊 | 31.2350, 121.4750 |
| 圆明园路 | 圆明园路·预言家日报社 | 预言家日报社 | 31.2420, 121.4880 |
| 豫园 | 豫园·翻倒巷 | 翻倒巷 | 31.2270, 121.4920 |
| 城隍庙 | 城隍庙·摸金阁 | 博金-博克商店 | 31.2255, 121.4915 |
| 静安寺 | 静安寺·古灵阁分部 | 古灵阁 | 31.2235, 121.4485 |
| 人民广场 | 人民广场·魔法部大厅 | 魔法部中庭 | 31.2310, 121.4730 |
| 陆家嘴 | 陆家嘴·金融魔法区 | 金融魔法区 | 31.2397, 121.4998 |
| 东方明珠 | 东方明珠·占卜塔 | 占卜塔 | 31.2398, 121.4997 |
| 徐家汇 | 徐家汇·魔法医院 | 圣芒戈医院 | 31.1955, 121.4365 |
| 衡山路 | 衡山路·凤凰社据点 | 凤凰社总部 | 31.2100, 121.4450 |
| 田子坊 | 田子坊·魔法工坊 | 魔杖工坊 | 31.2105, 121.4680 |

## 6条故事线

1. **飞路错拍线** - 飞路网络异常，时空错乱
2. **封口令线** - 麻瓜目击事件，记忆修改
3. **黑市走私线** - 翻倒巷非法交易
4. **古灵阁审计线** - 妖精银行审计风波
5. **霍格沃茨外勤线** - 学校外派任务
6. **潮汐奇兽线** - 神奇动物保护

## 注意事项

1. **测试模式**默认启用，会跳过位置检查
2. 场景数据存储在**内存**中，服务重启后需重新部署
3. 建议在测试前先调用 `/v1/test-mode/config` 确认当前配置
4. 如需恢复生产参数，调用重置API或手动设置默认值
